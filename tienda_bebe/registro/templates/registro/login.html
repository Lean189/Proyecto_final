{% extends 'producto/index.html' %}

{% block title %}Iniciar Sesión{% endblock %}

{% block content %}
  <h2>Iniciar Sesión</h2>
  
  <form method="POST" action="{% url 'login' %}">
    {% csrf_token %}
    
    <!-- Muestra errores de formulario si los hay -->
    {% if form.errors %}
      <div class="alert alert-danger">
        <ul>
          {% if form.username.errors %}
            {% for error in form.username.errors %}
              <li>{{ error }}</li>
            {% endfor %}
          {% endif %}
          {% if form.password.errors %}
            {% for error in form.password.errors %}
              <li>{{ error }}</li>
            {% endfor %}
          {% endif %}
        </ul>
      </div>
    {% endif %}
    
    <!-- Renderiza el formulario -->
    {{ form.as_p }}
    
    <button type="submit" class="btn btn-primary">Iniciar sesión</button>
  </form>

  <!-- Muestra mensajes flash -->
  {% if messages %}
    <div class="alert alert-info">
      <ul>
        {% for message in messages %}
          <li>{{ message }}</li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}
{% endblock %}
